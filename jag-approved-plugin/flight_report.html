<html>
<head>
    <title>flight_report</title>
    <link href="../base1/cockpit.css" type="text/css" rel="stylesheet">
    <script src="../base1/jquery.js"></script>
    <script src="../base1/cockpit.js"></script>
    <script>
        function flight_report() {
            num_recent = document.getElementById('num_recent'); 
            var proc = cockpit.spawn(["python", "/usr/share/cockpit/jag-approved-plugin/get_flight_report.py", "/var/lib/mavlink-router", num_recent]);
            proc.stream(flight_report_output);
        }
        function flight_report_output(data) {
            output.append(document.createTextNode(data));
        }
    </script>
</head>
<body>
    <h2> Number of reports to retrieve: </h2> 
    <input type="text" id="num_recent"/>
    <button type="button" onClick="flight_report()">Retrieve</button> 
    <pre id="output" style="border:none;background:white;"></pre>
</body>
</html>

